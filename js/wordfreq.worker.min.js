"use strict";!function(e){var i,t,o=(i={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},function(e){var o,a,s,u,n;return e.length<3?e:("y"==(s=e.substr(0,1))&&(e=s.toUpperCase()+e.substr(1)),a=/^(.+?)([^s])s$/,(u=/^(.+?)(ss|i)es$/).test(e)?e=e.replace(u,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2")),a=/^(.+?)(ed|ing)$/,(u=/^(.+?)eed$/).test(e)?(a=u.exec(e),(u=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(a[1])&&(u=/.$/,e=e.replace(u,""))):a.test(e)&&(o=(a=a.exec(e))[1],(a=/^([^aeiou][^aeiouy]*)?[aeiouy]/).test(o)&&(e=o,n=/([^aeiouylsz])\1$/,o=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,(a=/(at|bl|iz)$/).test(e)?e+="e":n.test(e)?(u=/.$/,e=e.replace(u,"")):o.test(e)&&(e+="e"))),(u=/^(.+?)y$/).test(e)&&(o=(a=u.exec(e))[1],(u=/^([^aeiou][^aeiouy]*)?[aeiouy]/).test(o)&&(e=o+"i")),(u=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(e)&&(o=(a=u.exec(e))[1],a=a[2],(u=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(o)&&(e=o+i[a])),(u=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(e)&&(o=(a=u.exec(e))[1],a=a[2],(u=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(o)&&(e=o+t[a])),a=/^(.+?)(s|t)(ion)$/,(u=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(e)?(o=(a=u.exec(e))[1],(u=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(o)&&(e=o)):a.test(e)&&(o=(a=a.exec(e))[1]+a[2],(a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(o)&&(e=o)),(u=/^(.+?)e$/).test(e)&&(o=(a=u.exec(e))[1],a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,n=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,((u=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(o)||a.test(o)&&!n.test(o))&&(e=o)),a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,(u=/ll$/).test(e)&&a.test(e)&&(u=/.$/,e=e.replace(u,"")),"y"==s&&(e=s.toLowerCase()+e.substr(1)),e)}),a=function(e){var i=[],t=Object.create(null);(e=e||{}).languages=e.languages||["chinese","english"],e.stopWordSets=e.stopWordSets||["cjk","english1","english2"],Array.isArray(e.stopWords)||(e.stopWords=[]),e.stopWordSets.forEach(function(i){switch(i){case"cjk":e.stopWords=e.stopWords.concat(["を","です","する","の","れら"]);break;case"english1":e.stopWords=e.stopWords.concat(["i","a","about","an","and","are","as","at","be","been","by","com","for","from","how","in","is","it","not","of","on","or","that","the","this","to","was","what","when","where","which","who","will","with","www","the"]);break;case"english2":e.stopWords=e.stopWords.concat(["we","us","our","ours","they","them","their","he","him","his","she","her","hers","it","its","you","yours","your","has","have","would","could","should","shall","can","may","if","then","else","but","there","these","those"])}}),"boolean"!=typeof e.filterSubstring&&(e.filterSubstring=!0),e.maxiumPhraseLength=e.maxiumPhraseLength||8,e.minimumCount=e.minimumCount||2;var a=function e(i,t){if(!i.length)return[];var o=[],a=Math.min(i.length,t);do{o.push(i.substr(0,a))}while(--a);return i.length>1&&(o=o.concat(e(i.substr(1),t))),o};return{process:function(s){if("string"!=typeof s)throw"You need to supply text for processing.";if(-1!==e.languages.indexOf("english")){var u=Object.create(null),n=s.split(/[^A-Za-zéÉ'’_\-0-9@\.]+/),r=e.stopWords;n.forEach(function(e){if((e=e.replace(/\.+/g,".").replace(/(.{3,})\.$/g,"$1").replace(/n[\'’]t\b/gi,"").replace(/[\'’](s|ll|d|ve)?\b/gi,""))&&!(e.length<2)&&!/^[0-9\.@\-]+$/.test(e)&&-1===r.indexOf(e.toLowerCase())){var i=o(e).toLowerCase();i in u||(u[i]={count:0,word:e}),u[i].count++,e.length<u[i].word.length&&(u[i].word=e),e.length===u[i].word.length&&e!==u[i].word&&(u[i].word=e.toLowerCase())}});for(var l in u){(f=u[l].word)in t?t[f]+=u[l].count:t[f]=u[l].count}u=void 0}if(-1!==e.languages.indexOf("chinese")){s=s.replace(/[^\u4E00-\u9FFF\u3400-\u4DBF]+/g,"\n"),e.stopWords.forEach(function(e){/^[\u4E00-\u9FFF\u3400-\u4DBF]+$/.test(e)&&(s=s.replace(new RegExp(e,"g"),"$1\n"))});var c=s.split(/\n+/),h=Object.create(null);if(c.forEach(function(i){i.length<=1||a(i,e.maxiumPhraseLength).forEach(function(e){e.length<=1||(e in h||(h[e]=0),h[e]++)})}),e.filterSubstring)for(var f in h){a(f,e.maxiumPhraseLength).forEach(function(e){f!==e&&e in h&&h[e]===h[f]&&delete h[e]})}for(var f in h)f in t||(t[f]=0),t[f]+=h[f];h=void 0}i=[];for(var f in t)t[f]<e.minimumCount||i.push([f,t[f]]);return i=i.sort(function(e,i){return e[1]>i[1]?-1:e[1]<i[1]?1:e[0]===i[0]?0:[e[0],i[0]].sort()[0]!==e[0]?1:-1})},empty:function(){return i=[],t=Object.create(null),!0},getList:function(){return i},getLength:function(){return i.length},getVolume:function(){var e=0;return i.forEach(function(i){e+=i[0].length*Math.pow(i[1],2)}),e},stop:function(){}}};if(a.isSupported=!!(Array.prototype.push&&Array.prototype.indexOf&&Array.prototype.forEach&&Array.isArray&&Object.create),"function"==typeof define&&define.amd)define("wordfreqsync",[],function(){return a});else if("object"==typeof module&&e===module.exports)module.exports=a,require.main===module&&console.error("Error: WordFreqSync is not meant to be executed directly.");else{var s;if(e.WordFreqSync=a,"self"in e&&!("window"in e&&window===e)&&!self.onmessage&&self.postMessage&&self.importScripts)self.onmessage=function(i){var t=i.data,o=t.method,u=t.params;if("init"===o)return s=a.apply(e,u),void self.postMessage(!0);if(!s)throw"You must init to create an instance first";if(!o||!s[o])throw"No such method";var n=s[o].apply(s,u);self.postMessage(n)}}}(this);