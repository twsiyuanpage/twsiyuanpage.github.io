"use strict";!function(r){var e=function(r){var e,t={};(r=r||{}).workerUrl=r.workerUrl||"wordfreq.worker.js";var a=[],n=null,l=!1,o=function(r){a.push(r),n||c()},c=function(){n=a.shift(),e.postMessage({method:n.method,params:n.params}),delete n.method,delete n.params},u=function(r){var e=n.callback;n=null,e&&e.call(t,r.data),a.length&&c()},f=function(r){var e=n.callback;delete n.callback,e&&e.call(t,r.data),n=null,a.length&&c()};["process","empty","getList","getLength","getVolume"].forEach(function(r){t[r]=function(){if(!l){var e,a=arguments.length;"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],a--);for(var n=[],c=0;c<a;)n[c]=arguments[c],c++;return o({method:r,params:n,callback:e}),t}}});t.stop=function(r){if(!l){if(l=!0,e.terminate(),e.onmessage=null,e.onerror=null,e=null,!r)return n=null,a=[],t;for(n&&n.callback&&n.callback.call(t),n=null;a.length;){var o=a.shift();o.callback&&o.callback.call(t)}return t}};return(e=new Worker(r.workerUrl)).onmessage=u,e.onerror=f,o({method:"init",params:[r]}),t};e.isSupported=!!(r.Worker&&Array.prototype.push&&Array.prototype.indexOf&&Array.prototype.forEach&&Array.isArray&&Object.create),"function"==typeof define&&define.amd?define("wordfreq",[],function(){return e}):r.WordFreq=e}(this);